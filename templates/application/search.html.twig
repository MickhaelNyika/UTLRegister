{% extends 'base.html.twig' %}

{% block title %}Search{% endblock %}
{% block ogtitle %}Search{% endblock %}

{% block class_body %}contact-page{% endblock %}
{% block body %}
    {% include 'common/page_title.html.twig' with {title:'Inscription'} %}
    <main class="contact section">
        <div class="container pb-2">
            <form class="navbar-search pull-left mb-3" method="get" action="{{ path('app_application_search') }}">
                <div class="input-group rounded">
                    <input type="search" class="form-control form-control-sm" placeholder="Recherche avec : code, nom, post-nom ou prénom" name="q" aria-label="Search" aria-describedby="search-addon"/>
                    <span class="input-group-text border-0" id="search-addon">
                        <i class="bi bi-search"></i>
                     </span>
                </div>
            </form>
        </div>
        <div class="container">
            <h6 class="fw-bold">Résultat de la recherche :</h6>
            {% for item in data %}
                <hr>
                <div class="row">
                    <div class="col-md-3">
                        CODE : {{ item.code }}
                    </div>
                    <div class="col-md-1 d-md-block d-none">
                        |
                    </div>
                    <div class="col-md-3">
                        NOM : {{ item.name }} {{ item.fistName }} {{ item.lastName }}
                    </div>
                    <div class="col-md-1 d-md-block d-none">
                        |
                    </div>
                    <div class="col-md-4">

                        {% if item.verified == true %}
                            <a class="float-md-end my-auto w-100" href="{{ path('app_pdf_generator', {code:item.code}) }}">
                                <button type="button" class="btn btn-primary btn-sm btn btn-primary w-100">
                                    <i class="bi bi-download"></i>
                                    Télécharger la fiche
                                </button>
                            </a>
                        {% else %}
                            <div class="row">
                                <div class="col">
                                    <a class="float-md-end my-auto w-100" href="{{ path('app_application_edit', {code:item.code}) }}">
                                        <button type="button" class="btn btn-primary btn-sm btn btn-primary w-100">
                                            <i class="bi bi-pen"></i>
                                            Modifier la fiche
                                        </button>
                                    </a>
                                </div>
                                <div class="col">
                                    <a class="float-md-end my-auto w-100" href="{{ path('app_pdf_generator', {code:item.code}) }}">
                                        <button type="button" class="btn btn-primary btn-sm btn btn-primary w-100">
                                            <i class="bi bi-download"></i>
                                            Télécharger la fiche
                                        </button>
                                    </a>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </div>

            {% else %}
                <p>Aucun résultat trouvé ...</p>
            {% endfor %}
            <div class="d-flex flex-column justify-content-between align-items-center mt-5">
                {{ knp_pagination_render(data) }}
            </div>
        </div>
    </main>
{% endblock %}

